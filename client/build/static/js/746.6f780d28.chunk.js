"use strict";(self.webpackChunkchat_app=self.webpackChunkchat_app||[]).push([[746],{5746:(n,e,t)=>{t.r(e),t.d(e,{default:()=>F});var a,r=t(168),s=t(2791),i=t(2978),o=t(5294),c=t(7689),d=t(4102),l=t(6949),m=t(8744),u=t(6011),h=t(184);const g=i.ZP.div(a||(a=(0,r.Z)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0.5rem;\n    border-radius: 0.5rem;\n    border: none;\n    cursor: pointer;\n    color: #21056c;\n    font-weight: bold;\n    text-decoration: none;\n    gap: 5px;\n\n    p:hover {\n        color: #d1d0d5;\n    }\n\n    svg {\n        font-size: 1.3rem;\n        color: #930606;\n    }\n"]))),f=function(){const n=(0,c.s0)(),{isAuthenticated:e,setIsAuthenticated:t}=(0,s.useContext)(u.V);return(0,h.jsxs)(g,{onClick:async()=>{const e=await JSON.parse(localStorage.getItem("chat-app-user"))._id;200===(await o.Z.get("".concat(d.p_,"/").concat(e),{withCredentials:!0})).status&&(localStorage.clear(),t(!1),n("/login"))},children:[(0,h.jsx)(m.t7h,{}),(0,h.jsx)("p",{children:"Logout"})]})};var p,x=t(1087),v=t(3848);const j=i.ZP.div(p||(p=(0,r.Z)(["\n    display: flex;\n    flex-direction: column;\n    gap: 15px;\n\n    .menu {\n        cursor: pointer;\n    }\n\n    .options {\n        z-index: 2;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        gap: 0.3rem;\n        border-radius: 0.5rem;\n        background-color: #7f6ccb;\n        position: absolute;\n        top: 8rem;\n        left: 8rem;\n        width: 22rem;\n\n        a {\n            padding-top: 8px;\n            color: #21056c;\n            font-weight: bold;\n            text-decoration: none;\n\n            p:hover {\n                color: #d1d0d5;\n            }\n        }\n\n    }\n\n\n"]))),b=()=>{const[n,e]=(0,s.useState)(!1);return(0,h.jsxs)(j,{children:[(0,h.jsx)("div",{className:"menu",onClick:()=>e(!n),children:(0,h.jsx)(v.bqP,{style:{color:"white",fontSize:"30px"}})}),n&&(0,h.jsxs)("div",{className:"options",children:[(0,h.jsxs)(x.rU,{to:"/avatar",children:[(0,h.jsx)("p",{children:"Change Avatar"})," "]}),(0,h.jsx)(x.rU,{to:"/setusername",children:(0,h.jsx)("p",{children:"Change username"})}),(0,h.jsx)(f,{})]})]})};var w;const y=i.ZP.div(w||(w=(0,r.Z)(["\n    display: grid;\n    grid-template-rows: 10% 75% 15%;\n    overflow: hidden;\n    background-color: #080420;\n    .brand {\n        display: flex;\n        align-items: center;\n        gap: 1rem;\n        img {\n            height: 3rem;\n        }\n        h3 {\n            color: white;\n            text-transform: uppercase;\n        }\n        .brands {\n            margin-left: 1.5rem;\n            display: flex;\n            flex-direction: row;\n            align-items: center;\n        }\n        .logout {\n            margin-left: 1.5rem;\n        }\n    }\n    .contacts {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        overflow: auto;\n        gap: 0.8rem;\n\n        &::-webkit-scrollbar {\n            width: 0.2rem;\n\n            &-thumb {\n                background-color: #ffffff39;\n                width: 0.1rem;\n                border-radius: 1rem;\n            }\n        }\n\n        .contact {\n            background-color: #ffffff34;\n            min-height: 5rem;\n            cursor: pointer;\n            width: 90%;\n            border-radius: 0.2rem;\n            padding: 0.4rem;\n            display: flex;\n            gap: 1rem;\n            align-items: center;\n            transition: 0.5s ease-out;\n\n            .avatar {\n                img {\n                    height: 3rem;\n                    width: 3rem;\n                }\n            }\n\n            .username {\n                h3 {\n                    color: white;\n                    font-size: 22px;\n                    text-transform: capitalize;\n                }\n            }\n        }\n\n        .selected {\n            background-color: #9a86f3;\n        }\n    }\n\n    .current-user {\n        background-color: #0d0d30;\n        display: flex;\n        justify-content: flex-start;\n        align-items: center;\n        gap: 2rem;\n\n        .avatar {\n            margin-left: 1.5rem;\n\n            img {\n                height: 4rem;\n                max-inline-size: 100%;\n            }\n        }\n\n        .username {\n            h1 {\n                color: white;\n                font-size: 27px;\n                padding-left: 2rem;\n                text-transform: capitalize;\n            }\n        }\n\n        a {\n            color: #4e0eff;\n            font-weight: bold;\n            text-decoration: none;\n            padding-right: 5px;\n        }\n\n        @media screen and (min-width: 720px) and (max-width: 1080px) {\n            gap: 0.5rem;\n            .username {\n                h2 {\n                    font-size: 1rem;\n                }\n            }\n        }\n\n    }\n"]))),k=function(n){let{contacts:e,currentUser:t,changeChat:a}=n;const[r,i]=(0,s.useState)(void 0),[o,c]=(0,s.useState)(void 0),[d,m]=(0,s.useState)(void 0);return(0,s.useEffect)((()=>{t&&(c(t.avatarImage),i(t.username))}),[t]),(0,h.jsx)(h.Fragment,{children:o&&r&&(0,h.jsxs)(y,{children:[(0,h.jsxs)("div",{className:"brand",children:[(0,h.jsx)("div",{className:"logout",children:(0,h.jsx)(b,{})}),(0,h.jsxs)("div",{className:"brands",children:[(0,h.jsx)("img",{src:l,alt:"Brand"}),(0,h.jsx)("h3",{children:"Snappy"})]})]}),(0,h.jsx)("div",{className:"contacts",children:e.map(((n,e)=>(0,h.jsxs)("div",{className:"contact ".concat(e===d?"selected":"","  "),onClick:()=>{((n,e)=>{m(n),a(e)})(e,n)},children:[(0,h.jsx)("div",{className:"avatar",children:(0,h.jsx)("img",{src:"data:image/svg+xml;base64,".concat(n.avatarImage),alt:"avatar"})}),(0,h.jsx)("div",{className:"username",children:(0,h.jsx)("h3",{children:n.username})})]},e)))}),(0,h.jsxs)("div",{className:"current-user",children:[(0,h.jsx)("div",{className:"avatar",children:(0,h.jsx)("img",{src:"data:image/svg+xml;base64,".concat(o),alt:"avatar"})}),(0,h.jsx)("div",{className:"username",children:(0,h.jsx)("h1",{children:r})})]})]})})};var N;const S=i.ZP.div(N||(N=(0,r.Z)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    color: white;\n    flex-direction: column;\n    img {\n        height: 20rem;\n    }\n    span {\n        color: #4e0eff;\n    }\n    h1{\n        font-size: 2rem;\n    }\n    h3{\n        font-size: 1.5rem;\n    }\n"]))),Z=function(n){let{currentUser:e}=n;return(0,h.jsxs)(S,{children:[(0,h.jsxs)("h1",{children:["Welcome ",(0,h.jsx)("span",{children:!(void 0===e)&&e.username})]}),(0,h.jsx)("h3",{children:"Please select chat to start messaging"})]})};t(9655),t(8869);var C,z=t(4330),I=t(5804),_=t(6421);const E=i.ZP.div(C||(C=(0,r.Z)(["\n    display: grid;\n    align-items: center;\n    grid-template-columns: 5% 95%;\n    background-color: #080420;\n    padding: 0 2rem;\n    @media screen and (min-width: 720px) and (max-width: 1080px) {\n        padding: 0 1rem;\n        gap: 1rem;\n    }\n\n    .button-container {\n        display: flex;\n        align-items: center;\n        color: white;\n        gap: 1rem;\n\n        .emoji {\n            position: relative;\n\n            svg {\n                font-size: 1.5rem;\n                color: #ffff00c8;\n                cursor: pointer;\n            }\n\n            .EmojiPickerReact {\n                position: absolute;\n                top: -29.5rem;\n                background-color: #080420;\n                box-shadow: 0 5px 10px #9a86f3;\n                border-color: #9a86f3;\n\n                .emoji-scroll-wrapper::-webkit-scrollbar {\n                    background-color: #080420;\n                    width: 5px;\n\n                    &-thumb {\n                        background-color: #9a86f3;\n                    }\n                }\n\n                .emoji-categories {\n                    button {\n                        filter: contrast(0);\n                    }\n                }\n\n                .emoji-search {\n                    background-color: transparent;\n                    border-color: #9a86f3;\n                }\n\n                .emoji-group:before {\n                    background-color: #080420;\n                }\n            }\n        }\n    }\n\n    .input-container {\n        width: 100%;\n        border-radius: 2rem;\n        display: flex;\n        align-items: center;\n        gap: 2rem;\n        background-color: #ffffff34;\n\n        input {\n            width: 90%;\n            height: 60%;\n            background-color: transparent;\n            color: white;\n            border: none;\n            padding-left: 1rem;\n            font-size: 1.2rem;\n\n            &::selection {\n                background-color: #9a86f3;\n            }\n\n            &:focus {\n                outline: none;\n            }\n        }\n\n        button {\n            padding: 0.3rem 2rem;\n            border-radius: 2rem;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            background-color: #9a86f3;\n            border: none;\n            @media screen and (min-width: 720px) and (max-width: 1080px) {\n                padding: 0.3rem 1rem;\n                svg {\n                    font-size: 1rem;\n                }\n            }\n\n            svg {\n                font-size: 2rem;\n                color: white;\n            }\n        }\n    }\n"]))),P=function(n){let{handleSendMessage:e}=n;const[t,a]=(0,s.useState)(!1),[r,i]=(0,s.useState)("");return(0,h.jsxs)(E,{children:[(0,h.jsx)("div",{className:"button-container",children:(0,h.jsxs)("div",{className:"emoji",children:[(0,h.jsx)(I.IZ1,{onClick:()=>{a((n=>!n))}}),t&&(0,h.jsx)(_.ZP,{onEmojiClick:n=>{return e=n,void i((n=>n+e.emoji));var e}})]})}),(0,h.jsxs)("form",{className:"input-container",action:"",onSubmit:n=>(n=>{n.preventDefault(),r.length>0&&(e(r),i(""))})(n),children:[(0,h.jsx)("input",{className:"input-container",type:"text",placeholder:"Type your message here",onChange:n=>{i(n.target.value)},value:r}),(0,h.jsx)("button",{className:"submit",type:"submit",children:(0,h.jsx)(z.ghy,{})})]})]})};var U,A=t(4261);const q=i.ZP.div(U||(U=(0,r.Z)(["\n    display: grid;\n    grid-template-rows: 10% 80% 10%;\n    gap: 0.1rem;\n    overflow: hidden;\n    @media screen and (min-width: 720px) and (max-width: 1080px) {\n        grid-template-rows: 15% 70% 15%;\n    }\n\n    .chat-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 0 2rem;\n\n        .user-details {\n            display: flex;\n            align-items: center;\n            gap: 1rem;\n\n            .avatar {\n                img {\n                    height: 3rem;\n                }\n            }\n\n            .username {\n                h3 {\n                    color: white;\n                }\n            }\n        }\n    }\n\n    .chat-messages {\n        padding: 1rem 2rem;\n        display: flex;\n        flex-direction: column;\n        gap: 1rem;\n        overflow: auto;\n\n        &::-webkit-scrollbar {\n            width: 0.2rem;\n\n            &-thumb {\n                background-color: #ffffff39;\n                width: 0.1rem;\n                border-radius: 1rem;\n            }\n        }\n\n        .message {\n            display: flex;\n            align-items: center;\n\n            .content {\n                max-width: 40%;\n                overflow-wrap: break-word;\n                padding: 1rem;\n                font-size: 1.1rem;\n                border-radius: 1rem;\n                color: #d1d1d1;\n                @media screen and (min-width: 720px) and (max-width: 1080px) {\n                    max-width: 70%;\n                }\n            }\n        }\n\n        .sent {\n            justify-content: flex-end;\n\n            .content {\n                background-color: #4f04ff21;\n            }\n        }\n\n        .received {\n            justify-content: flex-start;\n\n            .content {\n                background-color: #9900ff20;\n            }\n        }\n    }\n"]))),J=function(n){let{currentChat:e,currentUser:t,socket:a}=n;const[r,i]=(0,s.useState)([]),[c,l]=(0,s.useState)(null),m=(0,s.useRef)();return(0,s.useEffect)((()=>{t&&e&&(async()=>{const n=await o.Z.post(d.Ds,{from:t._id,to:e._id});i(n.data)})()}),[e]),(0,s.useEffect)((()=>{a.current&&a.current.on("msg-receive",(n=>{l({fromSelf:!1,message:n})}))}),[]),(0,s.useEffect)((()=>{c&&i((n=>[...n,c]))}),[c]),(0,s.useEffect)((()=>{var n;null===(n=m.current)||void 0===n||n.scrollIntoView({behavior:"smooth"})}),[r]),(0,h.jsxs)(q,{children:[(0,h.jsx)("div",{className:"chat-header",children:(0,h.jsxs)("div",{className:"user-details",children:[(0,h.jsx)("div",{className:"avatar",children:(0,h.jsx)("img",{src:"data:image/svg+xml;base64, ".concat(e&&e.avatarImage),alt:"chat avatar"})}),(0,h.jsx)("div",{className:"username",children:(0,h.jsx)("h3",{children:e&&e.username})})]})}),(0,h.jsx)("div",{className:"chat-messages",children:r.map((n=>(0,h.jsx)("div",{ref:m,children:(0,h.jsx)("div",{className:"message ".concat(!0===n.fromSelf?"sent":"received"),children:(0,h.jsx)("div",{className:"content",children:(0,h.jsx)("p",{children:n.message})})})},(0,A.Z)())))}),(0,h.jsx)(P,{handleSendMessage:async n=>{const s=[...r];if(s.push({fromSelf:!0,message:n}),i(s),t&&e){a.current.emit("send-msg",{to:e._id,from:t._id,msg:n});const{status:r}=await o.Z.post(d.ul,{from:t._id,to:e._id,message:n})}}})]})};var O,R=t(1608),V=t(3984);const D=i.ZP.div(O||(O=(0,r.Z)(["\n    display: flex;\n    flex-direction: column;\n    height: 100vh;\n    width: 100vw;\n    justify-content: center;\n    align-items: center;\n    gap: 1rem;\n    background-color: #131324;\n\n    .container {\n        height: 85vh;\n        width: 85vw;\n        background-color: #00000076;\n        display: grid;\n        grid-template-columns: 25% 75%;\n        @media screen and (min-width: 720px) and (max-width: 1080px) {\n            grid-template-columns: 40% 60%;\n        }\n    }\n"]))),F=function(){const n=(0,s.useRef)(),e=(0,c.s0)(),[t,a]=(0,s.useState)([]),[r,i]=(0,s.useState)(void 0),[l,m]=(0,s.useState)(void 0),{isAuthenticated:g,setIsAuthenticated:f}=(0,s.useContext)(u.V),p=async()=>{let n=JSON.parse(localStorage.getItem("chat-app-user"));if(!n){const{data:e}=await o.Z.get(d.QH,{withCredentials:!0});localStorage.setItem("chat-app-user",JSON.stringify(e)),n=e}i(n)};(0,s.useEffect)((()=>{(async()=>{if(g)await p();else{const{data:n}=await o.Z.get(d.kj,{withCredentials:!0});n.status?(await p(),f(!0)):e("/login")}})()}),[]),(0,s.useEffect)((()=>{r&&!r.isAvatarImageSet&&e("/avatar")}),[r,e]),(0,s.useEffect)((()=>{r&&(n.current=(0,R.io)(d.ho),n.current.emit("add-user",r._id))}),[r]);const{data:x,error:v,isLoading:j}=(0,V.a)({queryKey:["contacts"],queryFn:async()=>{const{data:n}=await o.Z.get("".concat(d.pK,"/").concat(r._id));return n},enabled:!!(r&&r.isAvatarImageSet&&r.username)});return(0,s.useEffect)((()=>{x&&a(x)}),[x]),(0,h.jsx)(D,{children:(0,h.jsxs)("div",{className:"container",children:[(0,h.jsx)(k,{contacts:t,currentUser:r,changeChat:n=>{m(n)}}),r&&void 0===l?(0,h.jsx)(Z,{currentUser:r}):(0,h.jsx)(J,{currentChat:l,currentUser:r,socket:n})]})})}}}]);
//# sourceMappingURL=746.6f780d28.chunk.js.map